<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="breadcrumb">
		<li><p:link outcome="/pages/invoicedetail">Invoice Summary</p:link></li>
	</ui:define>

	<ui:define name="content">
	<h:form id="invoiceDetailForm" prependId="false">
		<style type="text/css">
.alignTop {
	vertical-align: top;
}
</style>
		<div class="ui-g">
			<div class="ui-g-12">
				<div class="card">
				
				<h:panelGrid id="page">
				<p:panelGrid styleClass="ui-panelgrid-blank">
						<p:button value="Back" icon="fa fa-arrow-circle-left" outcome="staking?index=2?faces-redirect=true" style="float:left;" rendered="#{wfController.renderBackToInvoiceTab}" />
						<p:button value="Back" icon="fa fa-arrow-circle-left" outcome="invoicesearch?faces-redirect=true" style="float:left;" rendered="#{invController.renderBackToInvoiceSearch}" />
				
				<p:commandButton value="Print" type="button" icon="ui-icon-print" style="display:block;margin-bottom: 20px;float:right">
    				<p:printer target="page" />
				</p:commandButton>
				</p:panelGrid>
					<p:panelGrid id="invoiceHdr" columns="6" layout="grid" styleClass="ui-panelgrid-blank">
						<p:fieldset legend="Vendor Reference" style="font-weight:bold;text-align: center;">
							<h:outputText id="vendorRef" value="#{wfController.invoice.vendorReference}" />
						</p:fieldset>	
						<p:fieldset legend="LCEC Reference" style="font-weight:bold;text-align: center;">
							<h:outputText id="lcecRef" value="#{wfController.invoice.invoiceId}" />
						</p:fieldset>
						<p:fieldset legend="Vendor" style="font-weight:bold;text-align: center;">
							<h:outputText id="vendor" value="#{wfController.invoice.vendor.name}" />
						</p:fieldset>
						<p:fieldset legend="Invoice Status" style="font-weight:bold;text-align: center;">
							<h:outputText id="invStatus" value="#{wfController.invoice.invoiceStatus.description}" />
						</p:fieldset>
						<p:fieldset legend="Invoice Amount" style="font-weight:bold;text-align: center;">
							<h:outputText id="invAmount" value="#{wfController.invoice.invoiceAmount}" >
								<f:convertNumber type="currency" currencySymbol="$" />
							</h:outputText>
						</p:fieldset>
						<p:fieldset legend="Approved/Rejected Comment" style="font-weight:bold;text-align: center;">
							<h:outputText id="apprRejCommentId" value="#{wfController.invoice.approvedComment}" />
						</p:fieldset>			
					</p:panelGrid>
					<p:tabView id="invoiceSummaryTabContainer">
					<p:tab title="LCEC" id="lcecInvSumTab" rendered="#{userMBean.currentUser.isPermitted('S-INV:L-View')}">
							<h:panelGrid columns="1" styleClass="ui-panelgrid-blank" layout="grid">
							<p:dataTable id="lcecInvDetTbl" var="detail" value="#{wfController.invoiceDetail}" expandableRowGroups="true"
									sortBy="#{detail.description}" rowKey="#{detail.invoiceDetailId}" draggableColumns="true">
								<f:facet name="header">
            						Invoice Details
            						<p:panelGrid styleClass="ui-panelgrid-blank">
										<div style="float: right">
											<p:commandButton id="toggler" type="button"  icon="fa fa-align-left" style="float: right" value="Columns" />
        									<p:columnToggler datasource="lcecInvDetTbl" trigger="toggler" />
        								</div>
        								</p:panelGrid>
        						</f:facet>
        						<p:headerRow>
									<p:column colspan="3" >
										<h:outputText value="#{detail.description}" />	
									</p:column>
								</p:headerRow>
        						<p:column headerText="Description" style="text-align:center">
									<h:outputText value="#{detail.description}" />
								</p:column>					
								<p:column headerText="GL Code" style="text-align:center">
									<h:outputText value="#{detail.GL_Code}" />
								</p:column>
									<p:column headerText="Amount" style="text-align:center">
									<h:outputText value="#{detail.amount}" >
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
							</p:dataTable>
					</h:panelGrid>
					</p:tab>
					<p:tab title="Vendor" id="vendorInvSumTab"  rendered="#{userMBean.currentUser.isPermitted('S-INV:V-View')}">
					<h:panelGrid columns="1" styleClass="ui-panelgrid-blank">
					<h:panelGrid id="voucherApprovalGrid" columns="1" styleClass="ui-panelgrid-blank" layout="grid" >
					<p:dataTable id="voucherInvDetTbl" var="voucher" value="#{wfController.invoiceApprovalVouchers}">
					<f:facet name="header">
           				Voucher Details
           				<p:panelGrid styleClass="ui-panelgrid-blank">
										<div style="float: right">
											<p:commandButton id="toggler" type="button"  icon="fa fa-align-left" style="float: right" value="Columns" />
        									<p:columnToggler datasource="voucherInvDetTbl" trigger="toggler" />
        								</div>
        								</p:panelGrid>
       		</f:facet>
			<p:column headerText="Station" style="text-align:center">
				<h:outputText value="#{voucher.stationDescription}" />
			</p:column>
			<p:column headerText="Description" style="text-align:center">
				<h:outputText value="#{voucher.description}" />
			</p:column>
			<p:column headerText="Crew" style="text-align:center">
				<h:outputText value="#{voucher.crew}" />
			</p:column>
			<p:column headerText="Requestor" style="text-align:center">
				<h:outputText value="#{voucher.requestor}" />
			</p:column>
			<p:column headerText="Created Date" style="text-align:center">
				<h:outputText value="#{voucher.createdDt}">
					<f:convertDateTime pattern = "MM-dd-yyyy hh:mm:ss a" />
				</h:outputText>
			</p:column>
			<p:column headerText="Invoice Status" style="text-align:center">
				<h:outputText value="#{voucher.invoiceStatus.description}" />
			</p:column>
			<p:column headerText="Invoice Approval Comment" style="text-align:center">
				<h:outputText value="#{voucher.approvedComment}" />
			</p:column>
			<p:column headerText="Amount" style="text-align:center">
				<h:outputText value="#{voucher.amount}">
					<f:convertNumber type="currency" currencySymbol="$" />
				</h:outputText>
			</p:column>
		</p:dataTable>
					</h:panelGrid>
					<h:panelGrid columns="1" styleClass="ui-panelgrid-blank" layout="grid" >
							<p:dataTable id="invDetTbl" var="detail" value="#{wfController.invoiceGLSummaryVw}" expandableRowGroups="true"
									sortBy="#{detail.stationDescription}" rowKey="#{detail.stakingSheetDetailId}">
								<f:facet name="header">
            						Invoice Details
            						<p:panelGrid styleClass="ui-panelgrid-blank">
										<div style="float: right">
											<p:commandButton id="toggler" type="button"  icon="fa fa-align-left" style="float: right" value="Columns" />
        									<p:columnToggler datasource="invDetTbl" trigger="toggler" />
        								</div>
        								</p:panelGrid>
        						</f:facet>
        						<p:headerRow>
									<p:column colspan="8" >
										<h:outputText value="Station - #{detail.stationDescription}" />	
									</p:column>
								</p:headerRow>
        						<p:column headerText="C/R" style="text-align:center" filterBy="#{detail.assemblyActionCode}" filterMatchMode="contains" sortBy="#{detail.assemblyActionCode}">
									<h:outputText value="#{detail.assemblyActionCode}" />
								</p:column>
								<p:column headerText="Design Quantity" style="text-align:center" filterBy="#{detail.assemblyQuantity}" filterMatchMode="contains" sortBy="#{detail.assemblyQuantity}">
									<h:outputText value="#{detail.assemblyQuantity}" />
								</p:column>
								<p:column headerText="Assembly Unit" style="text-align:center" filterBy="#{detail.assemblyGuid}" filterMatchMode="contains" sortBy="#{detail.assemblyGuid}">
									<h:outputText value="#{detail.assemblyGuid}" />
								</p:column>
								<p:column headerText="Unit Description" style="text-align:center" filterBy="#{detail.assemblyDescription}" filterMatchMode="contains" sortBy="#{detail.assemblyDescription}">
									<h:outputText value="#{detail.assemblyDescription}" />
								</p:column>
								<p:column headerText="As-Built Quantity" style="text-align:center" filterBy="#{detail.asBuiltQuantity}" filterMatchMode="contains" sortBy="#{detail.asBuiltQuantity}">
									<h:outputText value="#{detail.asBuiltQuantity}" />
								</p:column>
								<p:column headerText="Invoice Status" style="text-align:center" filterBy="#{detail.invoiceStatus}" filterMatchMode="contains" sortBy="#{detail.invoiceStatus}">
									<h:outputText value="#{detail.invoiceStatus}" />
								</p:column>
								<p:column headerText="Invoice Approved Comment" style="text-align:center" filterBy="#{detail.invoiceApprovedComment}" filterMatchMode="contains" sortBy="#{detail.invoiceApprovedComment}">
									<h:outputText value="#{detail.invoiceApprovedComment}" />
								</p:column>
								<p:column headerText="Cost" style="text-align:center" filterBy="#{detail.extCost}" filterMatchMode="contains" sortBy="#{detail.extCost}">
									<h:outputText value="#{detail.extCost}">
										<f:convertNumber type="currency" currencySymbol="$" />
									</h:outputText>
								</p:column>
							</p:dataTable>
					</h:panelGrid>
					</h:panelGrid>
					</p:tab>			
					</p:tabView>
					<!-- <h:panelGrid styleClass="ui-panelgrid-blank"  style="margin-top:10px">
						<p:button value="Invoices" icon="fa fa-arrow-circle-left" outcome="staking?index=2?faces-redirect=true" style="float:left;" rendered="#{wfController.renderBackToInvoiceTab}" />
						<p:button value="Invoices" icon="fa fa-arrow-circle-left" outcome="invoicesearch?faces-redirect=true" style="float:left;" rendered="#{invController.renderBackToInvoiceSearch}" />
					</h:panelGrid> -->
					</h:panelGrid>
				</div>
			</div>
		</div>
		</h:form>
	</ui:define>
</ui:composition>
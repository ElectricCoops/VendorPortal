<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<p:dataTable id="voucherInvoiceApprovalTbl" var="voucher" value="#{wfController.invoiceApprovalVouchers}" 
				editable="true" editMode="cell" draggableColumns="true">
			<f:facet name="header">
           			Voucher Invoice Approval
           		<p:panelGrid styleClass="ui-panelgrid-blank">
											<div style="float: right">
												<!-- <h:commandLink id="voucherInvoiceApprovalTblExpCSV">
													<p:graphicImage name="/images/icons/csv.png" width="24" />
													<p:dataExporter type="csv"
														target="voucherInvoiceApprovalTbl"
														fileName="VoucherInvoiceApprovalCSV" />
													<p:tooltip id="csvToolTip"
														for="voucherInvoiceApprovalTblExpCSV"
														value="Export data table to CSV file" position="top" />
												</h:commandLink>
												<h:commandLink id="voucherInvoiceApprovalTblExpPDF">
													<p:graphicImage name="/images/icons/pdf.png" width="24" />
													<p:dataExporter type="pdf"
														target="voucherInvoiceApprovalTbl"
														fileName="VouchersInvoiceApprovalPDF"
														preProcessor="#{inspectionController.preProcessorPDF}" />
													<p:tooltip id="pdfTooltip"
														for="voucherInvoiceApprovalTblExpPDF"
														value="Export data table to PDF file" position="top" />
												</h:commandLink> -->
												<p:commandButton id="toggler" type="button"
													icon="fa fa-align-left" style="float: right"
													value="Columns" />
												<p:columnToggler datasource="voucherInvoiceApprovalTbl"
													trigger="toggler" />
											</div>
										</p:panelGrid>
									</f:facet>

									<!-- <p:ajax event="cellEdit" listener="#{wfController.updateVoucherInvoiceApproval(voucher)}" update="messages,:invApprovBtnFrm:approvalBtnId" /> -->

									<p:column headerText="Station" style="text-align:center">
										<h:outputText value="#{voucher.stationDescription}" />
									</p:column>
									<p:column headerText="Description" style="text-align:center">
										<h:outputText value="#{voucher.description}" />
									</p:column>
									<p:column headerText="Crew" style="text-align:center">
										<h:outputText value="#{voucher.crew}" />
									</p:column>
									<p:column headerText="Requestor" style="text-align:center">
										<h:outputText value="#{voucher.requestor}" />
									</p:column>
									<p:column headerText="Amount" style="text-align:center">
										<h:outputText value="#{voucher.amount}">
											<f:convertNumber type="currency" currencySymbol="$" />
										</h:outputText>
									</p:column>
									<p:column headerText="Invoice Status" style="text-align:center">
										<p:cellEditor>
											<f:facet name="output">
												<h:outputText value="#{voucher.invoiceStatus.description}" />
											</f:facet>
											<f:facet name="input">
												<p:selectOneMenu id="voucherInvoiceDetailStatusId"
													value="#{voucher.invoiceStatusId}" style="width: 99%;">
													<p:ajax event="change" listener="#{wfController.updateApprovalBtn}" update="@this voucherApprovedCommentId,:invApprovBtnFrm:approvalBtnId" />
													<f:selectItems value="#{wfController.invoiceStatus}" var="stat" itemLabel="#{stat.description}" itemValue="#{stat.invoiceStatusId}" />
												</p:selectOneMenu>
											</f:facet>
										</p:cellEditor>
									</p:column>
									<p:column headerText="Voucher Approval Comment"
										style="text-align:center">
										<p:cellEditor>
											<f:facet name="output">
												<h:outputText value="#{voucher.approvedComment}" />
											</f:facet>
											<f:facet name="input">
												<p:inputTextarea id="voucherApprovedCommentId"
													value="#{voucher.approvedComment}" maxlength="255"
													autoResize="false" style="width: 99%;"
													required="#{voucher.invoiceStatusId eq 3}"
													requiredMessage="Comment required on rejected voucher." />
											</f:facet>
										</p:cellEditor>
									</p:column>
								</p:dataTable>
</ui:composition>